{
  "schema_version": 1,
  "packet_id": "FNP-P2C-002",
  "subtask_id": "FNP-P2C-002-H",
  "status": "pass",
  "optimization_lever": {
    "id": "P2C002-H-LEVER-001",
    "description": "Use precomputed packet-002 dtype fixture ID maps for workflow-step dispatch",
    "rationale": "Packet-002 workflow replay repeatedly resolves dtype differential and adversarial fixture IDs for strict/hardened scenario steps; replacing repeated linear scans with precomputed HashMap lookups removes O(n) per-step lookup overhead while preserving deterministic fixture resolution semantics.",
    "risk_note": "Optimization only changes fixture-ID lookup strategy in workflow dispatch; fixture payload selection, step ordering, and reason-code outcomes remain unchanged.",
    "rollback_command": "git restore --source <last-green-commit> -- crates/fnp-conformance/src/workflow_scenarios.rs"
  },
  "benchmark_delta": {
    "p50_delta_percent": -94.1551852253403,
    "p95_delta_percent": -94.34976467648859,
    "p99_delta_percent": -94.39673804735743,
    "throughput_gain_percent_p50": 1610.9182045178227,
    "throughput_gain_percent_p95": 1669.8377903639932
  },
  "ev_gate": {
    "formula": "(Impact * Confidence * Reuse) / (Effort * AdoptionFriction)",
    "threshold": 2.0,
    "impact": 4.0,
    "confidence": 4.0,
    "reuse": 4.0,
    "effort": 2.0,
    "adoption_friction": 1.0,
    "score": 32.0,
    "promoted": true
  },
  "isomorphism": {
    "cases_total": 7,
    "cases_passed": 7,
    "cases_failed": 0,
    "ordering_tiebreak_note": "HashMap lookup path only replaces packet-002 dtype fixture-id membership/index resolution; fixture payload selection, workflow step ordering, and strict/hardened reason-code outcomes remain unchanged.",
    "checks": [
      {
        "case_id": "lookup_hit::dtype002_bool_i32_golden",
        "status": "pass",
        "details": "linear=Some(0) mapped=Some(0)"
      },
      {
        "case_id": "lookup_hit::dtype002_i32_i64_golden",
        "status": "pass",
        "details": "linear=Some(1) mapped=Some(1)"
      },
      {
        "case_id": "lookup_hit::dtype002_i32_f32_golden",
        "status": "pass",
        "details": "linear=Some(2) mapped=Some(2)"
      },
      {
        "case_id": "lookup_hit::dtype002_f32_f64_golden",
        "status": "pass",
        "details": "linear=Some(3) mapped=Some(3)"
      },
      {
        "case_id": "lookup_hit::dtype002_bool_f64_golden",
        "status": "pass",
        "details": "linear=Some(4) mapped=Some(4)"
      },
      {
        "case_id": "lookup_miss",
        "status": "pass",
        "details": "linear=None mapped=None"
      },
      {
        "case_id": "full_workload_checksum",
        "status": "pass",
        "details": "linear_checksum=4158251904 mapped_checksum=4158251904"
      }
    ]
  },
  "quality_gates": [
    {
      "command": "rch exec -- cargo fmt --check",
      "result": "pass"
    },
    {
      "command": "rch exec -- cargo check --workspace --all-targets",
      "result": "pass"
    },
    {
      "command": "rch exec -- cargo clippy --workspace --all-targets -- -D warnings",
      "result": "pass"
    },
    {
      "command": "rch exec -- cargo test -p fnp-conformance workflow_scenario_suite_is_green -- --nocapture",
      "result": "pass"
    },
    {
      "command": "rch exec -- cargo run -p fnp-conformance --bin generate_packet002_optimization_report -- --output-path artifacts/phase2c/FNP-P2C-002/optimization_profile_report.json",
      "result": "pass"
    },
    {
      "command": "rch exec -- cargo run -p fnp-conformance --bin run_workflow_scenario_gate -- --log-path target/workflow_scenario_packet002_opt_e2e.jsonl --artifact-index-path target/workflow_scenario_packet002_opt_artifact_index.json --report-path target/workflow_scenario_packet002_opt_reliability.json --retries 1 --flake-budget 0 --coverage-floor 1.0",
      "result": "pass"
    }
  ],
  "artifacts": [
    "crates/fnp-conformance/src/workflow_scenarios.rs",
    "crates/fnp-conformance/src/bin/generate_packet002_optimization_report.rs",
    "artifacts/phase2c/FNP-P2C-002/optimization_profile_report.json",
    "artifacts/phase2c/FNP-P2C-002/optimization_profile_isomorphism_evidence.json",
    "target/workflow_scenario_packet002_opt_e2e.jsonl",
    "target/workflow_scenario_packet002_opt_artifact_index.json",
    "target/workflow_scenario_packet002_opt_reliability.json"
  ],
  "notes": [
    "Profile report captures baseline/rebaseline lookup latency and throughput with reproducibility command and environment fingerprint.",
    "Isomorphism checks passed for lookup hits, lookup miss, and full-workload checksum parity between linear and HashMap lookup paths.",
    "Optimization accepted under EV gate with score >= 2.0 and no observed behavior drift.",
    "Post-change workflow scenario gate rerun passed with 509/509 scenarios and coverage_ratio=1.0."
  ]
}
